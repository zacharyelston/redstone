{
  "variables": {
    "configuration": [
      {
        "name": "ENVIRONMENT",
        "value": "${ENV_NAME}",
        "description": "Deployment environment"
      },
      {
        "name": "CLUSTER_NAME",
        "value": "release-${APP_NAME}-${ENV_NAME}",
        "description": "Cluster identifier"
      },
      {
        "name": "LOG_LEVEL",
        "value": "info",
        "description": "Application log level",
        "options": ["debug", "info", "warn", "error"]
      }
    ],
    "services": [
      {
        "name": "POSTGRES_VERSION",
        "value": "15-alpine",
        "category": "database"
      },
      {
        "name": "POSTGRES_USER",
        "value": "postgres",
        "category": "database"
      },
      {
        "name": "POSTGRES_DB",
        "value": "redmica_production",
        "category": "database"
      },
      {
        "name": "REDIS_VERSION",
        "value": "7-alpine",
        "category": "cache"
      },
      {
        "name": "REDMICA_VERSION",
        "value": "3.1.7",
        "category": "application"
      },
      {
        "name": "REDMICA_PORT",
        "value": "3000",
        "category": "application"
      },
      {
        "name": "LDAP_VERSION",
        "value": "1.5.0",
        "category": "authentication"
      },
      {
        "name": "LDAP_DOMAIN",
        "value": "redstone.local",
        "category": "authentication"
      },
      {
        "name": "LDAP_BASE_DN",
        "value": "dc=redstone,dc=local",
        "category": "authentication"
      },
      {
        "name": "LDAP_PORT",
        "value": "389",
        "category": "authentication"
      },
      {
        "name": "LDAPS_PORT",
        "value": "636",
        "category": "authentication"
      },
      {
        "name": "GRAFANA_VERSION",
        "value": "10.1.0",
        "category": "monitoring"
      },
      {
        "name": "GRAFANA_PORT",
        "value": "3002",
        "category": "monitoring"
      },
      {
        "name": "PROMETHEUS_VERSION",
        "value": "v2.47.0",
        "category": "monitoring"
      },
      {
        "name": "PROMETHEUS_PORT",
        "value": "9090",
        "category": "monitoring"
      },
      {
        "name": "LOKI_VERSION",
        "value": "2.9.0",
        "category": "logging"
      },
      {
        "name": "LOKI_PORT",
        "value": "3100",
        "category": "logging"
      },
      {
        "name": "PROMTAIL_VERSION",
        "value": "2.9.0",
        "category": "logging"
      },
      {
        "name": "FLUENT_BIT_VERSION",
        "value": "2.1.8",
        "category": "logging"
      },
      {
        "name": "NODE_EXPORTER_VERSION",
        "value": "v1.6.1",
        "category": "exporters"
      },
      {
        "name": "NODE_EXPORTER_PORT",
        "value": "9100",
        "category": "exporters"
      },
      {
        "name": "POSTGRES_EXPORTER_VERSION",
        "value": "v0.13.2",
        "category": "exporters"
      },
      {
        "name": "POSTGRES_EXPORTER_PORT",
        "value": "9187",
        "category": "exporters"
      },
      {
        "name": "REDIS_EXPORTER_VERSION",
        "value": "v1.54.0",
        "category": "exporters"
      },
      {
        "name": "REDIS_EXPORTER_PORT",
        "value": "9121",
        "category": "exporters"
      },
      {
        "name": "BLACKBOX_EXPORTER_VERSION",
        "value": "v0.24.0",
        "category": "exporters"
      },
      {
        "name": "BLACKBOX_EXPORTER_PORT",
        "value": "9115",
        "category": "exporters"
      },
      {
        "name": "CADVISOR_VERSION",
        "value": "v0.47.2",
        "category": "exporters"
      },
      {
        "name": "CADVISOR_PORT",
        "value": "8080",
        "category": "exporters"
      }
    ],
    "secrets": [
      {
        "name": "POSTGRES_PASSWORD",
        "length": 24,
        "description": "PostgreSQL database password",
        "category": "database",
        "required": true
      },
      {
        "name": "REDIS_PASSWORD",
        "length": 24,
        "description": "Redis cache password",
        "category": "cache",
        "required": true
      },
      {
        "name": "REDMICA_SECRET_KEY_BASE",
        "length": 64,
        "description": "Redmica secret key base",
        "category": "application",
        "required": true
      },
      {
        "name": "LDAP_ADMIN_PASSWORD",
        "length": 16,
        "description": "LDAP admin password (min 8 chars)",
        "category": "authentication",
        "required": true,
        "min_length": 8
      },
      {
        "name": "LDAP_CONFIG_PASSWORD",
        "length": 16,
        "description": "LDAP configuration password",
        "category": "authentication",
        "required": true
      },
      {
        "name": "GRAFANA_ADMIN_PASSWORD",
        "length": 16,
        "description": "Grafana admin password",
        "category": "monitoring",
        "required": true
      },
      {
        "name": "JWT_SECRET",
        "length": 64,
        "description": "JWT secret for authentication",
        "category": "security",
        "required": true
      },
      {
        "name": "SESSION_SECRET",
        "length": 64,
        "description": "Session secret for web sessions",
        "category": "security",
        "required": true
      }
    ],
    "optional": [
      {
        "name": "RELEASE_API_TOKEN",
        "description": "Release.com API token",
        "category": "release",
        "prompt": "Enter your Release.com API token (if using API)"
      },
      {
        "name": "RELEASE_APP_ID",
        "description": "Release.com application ID",
        "category": "release",
        "prompt": "Enter your Release.com App ID (if known)"
      },
      {
        "name": "RELEASE_ENV_ID",
        "description": "Release.com environment ID",
        "category": "release",
        "prompt": "Enter your Release.com Environment ID (if known)"
      }
    ]
  },
  "profiles": {
    "development": {
      "overrides": {
        "LOG_LEVEL": "debug",
        "REDMICA_PORT": "3000",
        "GRAFANA_PORT": "3001"
      }
    },
    "production": {
      "overrides": {
        "LOG_LEVEL": "warn",
        "CLUSTER_NAME": "prod-${APP_NAME}"
      },
      "required_secrets": ["all"]
    }
  }
}
